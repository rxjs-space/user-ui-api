# Angular 2技术选型指南

## 太长不读版
### 什么时候**不要**选择Angular 2？

#### 客户需要兼容IE8

Angular 2完全放弃了IE8，如果客户坚定的要求支持IE8，那么请不要选择Angular 2。但是如果系统的主要用户使用的是360等双核浏览器，那么可以将其视为Chrome，因为这些双核浏览器都提供了强制切换到WebKit内核的功能。
    
#### 存在极致的性能要求
虽然Angular 2的变更检测效率相比Angular 1提升了500%，并对WebWorker等技术提供了支持，但是它仍然不适合3D手游等要求极致性能的应用场景。
  
#### 极客团队而非工程团队

相对于工程团队，极客团队往往会期望更高的灵活性和挑战极限的能力，而Angular 2是一个工程化框架，其中约定了很多最佳实践。虽然违反最佳实践也能写出好的程序，但是一般的工程团队还是会选择遵循。而极客团队可能会不喜欢最佳实践，而是自己进行探索，这可能导致项目延期及烂代码。

#### 技术决策者比较保守
如果你的上司仍然坚持使用jQuery，就不必花时间说服他了 —— 除非他具有强烈的后端开发背景。

### 什么时候**应该**选择Angular 2？

#### 开发团队或维护团队具有深刻的后端背景

Angular 2的编程模型和后端的传统开发方式很像，特别是依赖注入、测试驱动、注解/装饰器、可选强类型（如类、接口）等，同时在WebStorm/IntelliJ的支持下具备了很强的语法检查和重构能力。这意味着对于那些具有后端背景的团队，其知识、习惯和组织形式可以得到充分的复用。

#### 团队有强烈的分工需求

Angular 2中的HTML/CSS/JS任务分离得很充分，这意味着并不需要每个成员都同时精通HTML/CSS/JS，而是可以分工合作：有人用JS通过TDD的方式写公共逻辑和AOP模块，有人负责信息架构和页面的设计，有人负责用CSS进行最终的高保真美化。这些任务互不干扰，大多数情况下他们都不需要同时修改同一个文件，最大程度的减小了合并冲突。

#### 你是谷歌或微软的铁粉

毫无疑问，Angular 2和TypeScript的组合将是你为信仰充值的好机会。
   
## 刨根问底版

### 开发团队

Angular 2的开发团队也是来自Angular 1（since 2009）的，这意味着他们有着非常丰富的前端框架开发和维护经验。同时，团队的核心成员是几位来自Google的正式员工，因此本框架中也融入了Google多年的项目经验。

### 社区团队

Angular 2的核心库目前已经拥有300多位提交过代码的贡献者，提过issue的人以及参与周边库/工具开发的人更是不计其数。Angular 2尚未发布即拥有了15,000多颗star，而Angular 1拥有52,000多颗，从中可以看出社区的繁荣程度。

搜索热度趋势图如下：

![搜索趋势图](./trends.png)

### 代码质量

Angular 2在两年半的时间里历经56个alpha、18个beta和8个rc版本才最终推出，是开发组长期努力的成果。

Angular库本身使用强类型的TypeScript语言写成，这也是代码质量的重要保障。

### 文档质量

Angular2的官方文档非常全面，既有7章新手教程，还有面向中高级的27章开发指南和12章Cookbook，并且还在不断增补中。除此之外，还有一个便于搜索的API参考手册。

对于英语不好的开发人员，还有我和好友亲自汉化的一个中文文档站。这个文档站得到了官方开发组的承认与支持，将来我们还会一直保持同步更新。

### 第三方资源

电子书《ng-book2》<https://www.ng-book.com/2/> 正在随着官方的开发进度而同步更新，同时，我们正在翻译它的中文版，预计将在官方发布release不久之后发布。

PrimeNg <http://www.primefaces.org/primeng/#/> 是一个相当全面的基于Angular 2的第三方库，特别适合企业级应用的需求。同时提供了开源和商业版本。

Ionic 2 <http://ionicframework.com/docs/v2/> 是一个基于Angular 2的移动端框架，内置了各种手机常用的UI，完全开源，但目前尚处于beta阶段。

除此之外还有一些bootstrap等基础库。

不过总体来说，Angular 2在正式发布之前，资源还是比较贫乏的，但它的优势在于封装可复用组件以及包装原生JS组件都相当容易。所以，除非需要特别复杂的组件，否则不必为此而忧虑。Angular 2本身的功能非常强大，即使不使用第三方组件也足够实现相当复杂的应用了。

预计在Angular 2正式发布之后，资源匮乏的现象会有显著改善。

### 不同背景的上手难度

对于具有后端背景的开发人员，特别是Java和C#程序员来说，Angular 2具有很多熟悉的特性，比如依赖注入、注解/装饰器、测试驱动开发、类、接口等。这些人转型的主要挑战将在正确使用CSS和HTML方面，建议好好学学bootstrap等CSS框架，并了解下语义化HTML和CSS的相关知识。

对于以切图为主要经验的前端开发人员，要想掌握Angular 2中的概念会有一定难度。不过即使无法精通这些新概念，也不妨碍他们做页面设计和界面细修等工作。

总之，要想降低Angular的上手难度，最好有一个技能互补的团队。

### 基础概念明晰、稳定

Angular 2的基础概念继承并改进自Angular 1，但是在Angular 1的基础上进行了大幅简化，并完全重写了实现。

同时，它的很多核心概念来自Java、C#并受到Flex和WPF的启发，因此对具备这些背景的程序员来说，其基础概念相当明晰。

### 性能

Angular 2的变更检测效率相对Angular 1提升了500%，并提供了一些其它优化措施，性能在绝大多数场景下都不再是瓶颈。但是如果你要开发3D手游等对性能要求很高的应用，还是去用原生或专门优化过的H5库吧。

Angular 2通过服务端渲染、预编译等技术大幅提高了首屏加载速度，并提供了SEO支持。还通过NativeScript(beta)等第三方库提供了编译为原生应用的功能。

### 安全

Angular内置了对XSS和CSRF的防护机制，会在前端对危险代码进行净化。所以只要不去刻意调用“信任内容”类的危险API或绕过Angular直接操纵DOM，就不会出现前端安全风险。XSS可以完全由Angular自身完成防护，而CSRF可以在几乎不增加前端代码的情况下与后端配合完成。

### 测试支持

Angular 1中就已经内置了单元测试和E2E测试的支持，Angular 2更是继承了此特性，并对书写方式进行了大幅简化，降低了编程难度。

### IDE支持

IntelliJ/WebStorm的最新版中对Angular 2提供了强力支持，比如：智能代码提示、类型检查、组件重命名、组件变量/模板变量同步改名、跳转到定义、自动实现接口、抽取变量、抽取函数等等。有些功能虽然在Angular 1中就已经实现了，但是借助TypeScript的威力，这个版本中准确度提高了很多。

### 灵活性

Angular 2可以与RxJS、Redux、ImmutableJS等进行自由组合，取长补短。还可以与ReactNative、NativeScript等组合使用，以打包出原生应用。

### 整合性

对于大多数应用，都可以使用完全基于Angular 2的技术栈来完成，而不需要评测、组合其它技术。对于降低前期技术选型成本很有帮助。
